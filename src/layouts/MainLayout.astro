---
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import "../styles/tailwind.css";

/* SEO: Enhanced meta props
   - description: Custom meta per page (fallback included)
   - ogImage: Social sharing image
   - canonical: Prevents duplicate content */
const {
  title,
  description = "Stop Spild Af Mad er Danmarks største bevægelse mod madspild. Lær om madspild og hvordan du kan undgå det i din hverdag.",
  ogImage = "/img/og-image.jpg",
  canonical = Astro.url.href,
} = Astro.props;

// SEO: Full title with site branding
const fullTitle = title
  ? `${title} | Stop Spild Af Mad`
  : "Stop Spild Af Mad - Bekæmp madspild i Danmark";
---

<html lang="da">
  <head>
    <!-- PERFORMANCE: Critical meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- PROTOTYPE: No search indexing -->
    <meta name="robots" content="nofollow, noindex" />

    <!-- SEO: Primary meta tags -->
    <title>{fullTitle}</title>
    <meta name="description" content={description} />
    <meta
      name="keywords"
      content="madspild, stop madspild, miljø, Stop Spild Af Mad, klima, bæredygtighed, tips, projekter mod madspild, fødevarer, genbrug"
    />

    <!-- SEO: Canonical URL (prevents duplicates) -->
    <link rel="canonical" href={canonical} />

    <!-- SEO: Open Graph (social sharing) -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content={fullTitle} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={ogImage} />
    <meta property="og:url" content={canonical} />
    <meta property="og:site_name" content="Stop Spild Af Mad" />
    <meta property="og:locale" content="da_DK" />

    <!-- SEO: Twitter Card meta tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={fullTitle} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={ogImage} />

    <!-- PERFORMANCE: Favicon & app icons -->
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/img/favicon-16x16.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/img/favicon-32x32.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/img/apple-touch-icon.png"
    />

    <!-- PERFORMANCE: Font optimization -->
    <!-- Preconnect to Adobe Typekit origins -->
    <link rel="preconnect" href="https://use.typekit.net" crossorigin />
    <link rel="preconnect" href="https://p.typekit.net" crossorigin />
    <!-- Async load fonts with print media trick + font-display override -->
    <link
      rel="stylesheet"
      href="https://use.typekit.net/cya8lpp.css"
      media="print"
      onload="this.media='all'; this.onload=null;"
    />
    <noscript
      ><link
        rel="stylesheet"
        href="https://use.typekit.net/cya8lpp.css"
      /></noscript
    >
    <style>
      /* Font-display swap overrides Typekit defaults (80ms + 70ms savings) */
      * {
        font-display: swap !important;
      }
    </style>

    <!-- PERFORMANCE: Defer non-critical scripts -->
    <meta name="generator" content={Astro.generator} />
    <script
      defer
      src="https://unpkg.com/tailwindcss-intersect@2.x.x/dist/observer.min.js"
    ></script>

    <!-- ============================================
         SECURITY: PASSWORD PROTECTION
         ============================================
         Midlertidigt deaktiveret til Lighthouse testing.
         
         For at AKTIVERE password igen:
         Fjern comment tags nedenfor. -->
    <!-- <script src="../assets/login.js"></script> -->
    <!-- ============================================ -->
  </head>

  <body>
    <Header />
    <slot />
    <Footer />
  </body>
</html>

<style>
  html ::-webkit-scrollbar {
    display: none;
  }
</style>
