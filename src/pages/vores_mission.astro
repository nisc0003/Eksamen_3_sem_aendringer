---
import MainLayout from "../layouts/MainLayout.astro";
/* CODE CLEANUP: Removed unused imports - Image, Header, Buttons2 */
import Heading from "../components/Heading.astro";
import Text from "../components/Text.astro";
import Button from "../components/Button.astro";
import Link from "../components/Link.astro";
import Card from "../components/Card.astro";
import Articles from "../components/Articles.astro";
---

<!-- ========================================
     SEO: Custom description for mission page
     ======================================== -->
<MainLayout
  title="Vores Mission"
  description="Lær om Stop Spild Af Mads mission, vores historie siden 2008, og få tips til at bekæmpe madspild i hverdagen."
>
  <!-- ============================================
       HERO SEKTION - "Deltag i kampen mod madspild"
       Overskrift med navigation til tips og historie
       ============================================ -->
  <section
    class="container flex-col flex lg:flex-row justify-between mb-10 mt-15"
  >
    <Heading htmlheading="h2" size="medium" stylingclasses="mb-6 lg:max-w-lg">
      DELTAG I KAMPEN I MOD MADSPILD
    </Heading>

    <div class="flex flex-col gap-3 lg:items-end">
      <div onclick="ScrollToTips()">
        <Link variant="yellow" size="small"> LÆS OM VORES TIPS </Link>
      </div>
      <div onclick="ScrollToHistorie()">
        <Link variant="black" size="small"> VORES HISTORIE </Link>
      </div>
    </div>
  </section>

  <!-- ============================================
       FRUGT BILLEDER - Inspirations carousel
       Roterende billeder af frugter og grøntsager
       ============================================ -->
  <section
    class="container carousel overflow-hidden [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]"
  >
    <div class="group">
      <!-- Changed: Added descriptive alt-text for carousel images for better SEO and accessibility -->
      <img
        src="/img/frugt1.webp"
        alt="Forskellige frugter til inspiration for at undgå madspild"
        class="carousel_img grow-0 shrink-0 basis-5em"
      />
      <img
        src="/img/frugt2.webp"
        alt="Forskellige frugter til inspiration for at undgå madspild"
        class="carousel_img grow-0 shrink-0 basis-5em"
      />
      <img
        src="/img/frugt3.webp"
        alt="Forskellige frugter til inspiration for at undgå madspild"
        class="carousel_img grow-0 shrink-0 basis-5em"
      />
      <img
        src="/img/frugt4.webp"
        alt="Forskellige frugter til inspiration for at undgå madspild"
        class="carousel_img grow-0 shrink-0 basis-5em"
      />
      <img
        src="/img/frugt5.webp"
        alt="Forskellige frugter til inspiration for at undgå madspild"
        class="carousel_img grow-0 shrink-0 basis-5em"
      />
      <img
        src="/img/frugt6.webp"
        alt="Forskellige frugter til inspiration for at undgå madspild"
        class="carousel_img grow-0 shrink-0 basis-5em"
      />
      <!-- Duplicated images for seamless infinite loop -->
      <img
        src="/img/frugt1.webp"
        alt="Forskellige frugter til inspiration for at undgå madspild"
        class="carousel_img grow-0 shrink-0 basis-5em"
      />
      <img
        src="/img/frugt2.webp"
        alt="Forskellige frugter til inspiration for at undgå madspild"
        class="carousel_img grow-0 shrink-0 basis-5em"
      />
      <img
        src="/img/frugt3.webp"
        alt="Forskellige frugter til inspiration for at undgå madspild"
        class="carousel_img grow-0 shrink-0 basis-5em"
      />
      <img
        src="/img/frugt4.webp"
        alt="Forskellige frugter til inspiration for at undgå madspild"
        class="carousel_img grow-0 shrink-0 basis-5em"
      />
      <img
        src="/img/frugt5.webp"
        alt="Forskellige frugter til inspiration for at undgå madspild"
        class="carousel_img grow-0 shrink-0 basis-5em"
      />
      <img
        src="/img/frugt6.webp"
        alt="Forskellige frugter til inspiration for at undgå madspild"
        class="carousel_img grow-0 shrink-0 basis-5em"
      />
    </div>
  </section>

  <section
    class="flex flex-col place-items-center mt-10 mb-30 animate-bounce animate-infinite animate-ease-in p-5 hover:cursor-pointer lg:mb-80"
  >
    <!-- Changed: Added meaningful alt-text for scroll indicator -->
    <img
      src="/img/arrow_d.svg"
      alt="Pil ned for at scrolle til næste sektion"
      id="scrollDown"
    />
  </section>

  <!-- ============================================
       TIPS SEKTION - "Hvad kan vi gøre?"
       Praktiske tips til at mindske madspild
       ============================================ -->
  <section class="container mt-5 flex flex-col mb-section_buttom">
    <div class="flex flex-col gap-5 lg:flex-row lg:gap-10 items-stretch">
      <div class="flex-1 flex flex-col justify-between">
        <Heading htmlheading="h2" size="medium" stylingclasses="mb-6">
          Hvad kan vi gøre?
        </Heading>

        <Text size="small">
          Emner som disse kan virke store og uoverskuelige. Det kan være svært
          at vide hvor man skal starte, hvis man gerne vil hjælpe med at gøre en
          forskel. Derfor har vi her nogle simple vaner man kan indfører i
          hverdagen, som hjælper til med at mindske mængden af madspild:</Text
        >

        <!-- SEO & ACCESSIBILITY: Using semantic button elements with proper styling -->
        <div class="flex flex-col gap-3 mt-5 lg:mt-20">
          <button
            onclick="ScrollToTip1()"
            class="cursor-pointer text-left w-full bg-green--400 hover:bg-green--200 text-white px-4 py-3 rounded-CTA transition-colors duration-300"
          >
            <Text size="small" weight="medium" stylingclasses="text-white"
              >KØB ENKELT VARE</Text
            >
          </button>
          <button
            onclick="ScrollToTip2()"
            class="cursor-pointer text-left w-full bg-orange--400 hover:bg-orange--200 text-white px-4 py-3 rounded-CTA transition-colors duration-300"
          >
            <Text size="small" weight="medium" stylingclasses="text-white"
              >KØB IND MED OMTANKE</Text
            >
          </button>
          <button
            onclick="ScrollToTip3()"
            class="cursor-pointer text-left w-full bg-purple--400 hover:bg-purple--200 text-white px-4 py-3 rounded-CTA transition-colors duration-300"
          >
            <Text size="small" weight="medium" stylingclasses="text-white"
              >DOGGY BAGS</Text
            >
          </button>
        </div>
      </div>

      <!-- SEO & PERFORMANCE: Alt-text and lazy loading -->
      <img
        src="/img/food_bag.webp"
        alt="Pose med frukt og grøntsager - Stop madspild"
        class="shrink-0 w-auto h-auto lg:h-full rounded-lg"
        width="400"
        height="600"
        loading="lazy"
      />
    </div>
  </section>
</MainLayout>

<!-- ============================================
       TIP 1 - Køb enkelt-varer
       Om mængderabatter og madspild
       ============================================ -->
<section class="container mb-section_buttom mt-section_top">
  <div
    id="tip1"
    class="flex flex-col gap-5 lg:flex-row lg:gap-20 items-stretch"
  >
    <div class="flex-1 flex flex-col justify-between">
      <Link variant="green-inverted" size="small">Tip 1</Link>
      <Heading htmlheading="h2" font="sans" size="medium" stylingclasses="my-6">
        Fortsæt med at købe enkelt-varer
      </Heading>

      <div class="sm:flex flex-col gap-3">
        <Text size="small"
          >I 2017 medvirkede Stop Spild Af Mad til at Rema 1000 droppede
          mængerabatter i alle kædens danske butikker.</Text
        >
        <Text size="small" stylingclasses="mb-3"
          >Mængden af madspild faldt her efter fra ca. 80-100 bananer blev smidt
          ud om dagen, til kun 10 bananer om dagen.
        </Text>
      </div>
    </div>

    <div
      class="shrink-0 w-auto h-auto lg:h-full flex items-center justify-center"
    >
      <div
        class="relative w-72 h-80 lg:w-96 lg:h-96 flex items-center justify-center"
      >
        <div
          class="shuffleImg absolute inset-0 flex items-center justify-center"
        >
          <!-- Changed: Added alt-text for banana image - better SEO -->
          <img
            src="/img/banan1.webp"
            alt="En enkelt gul banan"
            class="h-full w-auto object-contain"
          />
        </div>
        <div
          class="shuffleImg absolute inset-0 flex items-center justify-center"
        >
          <!-- Changed: Added alt-text for bananas image - better SEO -->
          <img
            src="/img/bananer.png"
            alt="Bundt af gule bananer"
            class="h-full w-auto object-contain"
          />
        </div>
      </div>
    </div>
  </div>
</section>

<!-- ============================================
         TIP 2 - Køb ind med omtanke
         Statistik om madspild fra indkøb
         ============================================ -->
<section class="container mb-section_buttom mt-section_top" id="tip2">
  <Link variant="orange" size="small">TIP 2</Link>
  <Heading htmlheading="h2" font="sans" size="medium" stylingclasses="my-6">
    Køb in med omtanke
  </Heading>

  <Text size="small" stylingclasses="mb-2"
    >I gennemsnittet ender vi med at smide 25% af maden vi køber ud.</Text
  >
  <Text size="small">
    Det vil svare til at hver fjerede indkøbsvogn man ser i supermarkedet bliver
    smidt ud.</Text
  >

  <div
    class="mt-8 flex flex-col gap-8 lg:grid lg:grid-cols-2 lg:gap-10"
    id="stagger"
  >
    <div
      class="flex flex-col gap-4 lg:flex-row lg:gap-8 justify-center items-center"
    >
      <!-- Changed: Added alt-text to shopping carts for better SEO -->
      <img
        src="/img/cart.webp"
        alt="Indkøbsvogn med fødevarer"
        class="h-40 lg:h-48 w-auto object-contain"
      />
      <img
        src="/img/cart.webp"
        alt="Indkøbsvogn med fødevarer"
        class="h-40 lg:h-48 w-auto object-contain"
      />
    </div>

    <div
      class="flex flex-col gap-4 lg:flex-row lg:gap-8 justify-center items-center"
    >
      <!-- Changed: Added alt-text to shopping carts for better SEO -->
      <img
        src="/img/cart.webp"
        alt="Indkøbsvogn med fødevarer"
        class="h-40 lg:h-48 w-auto object-contain"
      />
      <img
        src="/img/cart.webp"
        alt="Indkøbsvogn uden fødevarer - symboliserer madspild"
        class="grayscale h-40 lg:h-48 w-auto object-contain"
      />
    </div>
  </div>
</section>

<!-- ============================================
         TIP 3 - Doggy Bags
         Restauranter med Doggy Bag samarbejde
         ============================================ -->
<section class="container mb-section_buttom mt-section_top" id="tip3">
  <Link variant="purple" size="small">Tip 3</Link>
  <Heading htmlheading="h2" font="sans" size="small" stylingclasses="my-6">
    Doggy Bags
  </Heading>

  <div class="flex flex-col lg:grid lg:grid-cols-2 lg:gap-20 lg:items-start">
    <!-- doggy bag billede og tekst -->
    <div class="flex flex-col gap-6">
      <div
        class="bg-[url('/img/star.svg')] bg-no-repeat bg-contain bg-center h-72 lg:h-96 flex items-center justify-center"
      >
        <img
          src="/img/doggy_bag.webp"
          alt="Doggy bag ikon"
          class="h-48 lg:h-56 w-auto object-contain"
        />
      </div>

      <div class="flex flex-col gap-2">
        <Text size="small"
          >I adskellige forskellige resturanter har vi samarbejdskab og har
          implimenteret vores Doggy bag!</Text
        >
        <Text size="small"
          >Hvis du ikke kan spise din mad færdig kan du spørge om en doggy bag
          og tage maden med hjem!</Text
        >
      </div>
    </div>

    <!-- kort og knap -->
    <div class="flex flex-col gap-6">
      <div id="mapContainer" class="map-container h-80 lg:h-96">
        <img
          src="/img/cph_map.webp"
          alt="Kort over København med restauranter"
          id="mapImage"
          class="map-image w-full h-full"
        />
      </div>
      <div class="flex justify-center lg:justify-start">
        <Link href="/wip" variant="purple" size="large"> SE RESTURANTER </Link>
      </div>
    </div>
  </div>
</section>

<!-- ============================================
       VORES HISTORIE
       Tidslinje med vigtige milepæle siden 2008
       ============================================ -->
<section
  class="container text-center mb-section_buttom mt-section_top"
  id="historie"
>
  <div class="max-w-3xl mx-auto">
    <Heading htmlheading="h1" size="medium" stylingclasses="mb-6">
      VORES HISTORIE
    </Heading>
    <Text
      >Vi er meget stolte af hvor meget Stop Spild Af Mad har mulighed for at
      udrette.
      <br />
      Her er nogle af vores højdepunkter.</Text
    >
  </div>
</section>

<!-- ============================================
       TIDSLINJE - Interactive timeline
       Vigtige begivenheder fra 2008 til 2020
       ============================================ -->
<section class="container mb-section_buttom">
  <div class="tidslinje flex flex-col lg:flex-row gap-10 lg:gap-20">
    <div class="order-2 lg:order-1 lg:w-40 shrink-0">
      <ul
        class="flex flex-row overflow-x-auto overflow-y-hidden lg:flex-col gap-4 lg:gap-6 pb-4 lg:pb-0 pr-8 lg:pr-0"
      >
        <li class="li1 activeTime my-2" id="li1">
          <Text size="large">2008</Text>
        </li>
        <li class="li2 my-2" id="li2"><Text size="large">2010</Text></li>
        <li class="li3 my-2" id="li3"><Text size="large">2011</Text></li>
        <li class="li4 my-2" id="li4"><Text size="large">2013</Text></li>
        <li class="li5 my-2" id="li5"><Text size="large">2014</Text></li>
        <li class="li6 my-2" id="li6"><Text size="large">2016</Text></li>
        <li class="li7 my-2" id="li7"><Text size="large">2019</Text></li>
        <li class="li8 my-2" id="li8"><Text size="large">2024</Text></li>
      </ul>
      <!-- 
        <ul class="overflow-auto w-auto pr-25 sm:hidden lg:inline">
          <li class="li1 activeTime" id="li1"><h1>2008</h1></li>
          <li class="li2" id="li2"><h1>2009</h1></li>
          <li class="li3" id="li3"><h1>2010</h1></li>
          <li class="li4" id="li4"><h1>2011</h1></li>
          <li class="li5" id="li5"><h1>2012</h1></li>
        </ul> -->
    </div>
    <div class="order-1 lg:order-2 flex flex-col lg:flex-1">
      <div class="flex flex-col lg:flex-row li1_content gap-5" id="li1_content">
        <!-- SEO & PERFORMANCE: Improved alt-text and lazy loading -->
        <img
          src="/img/2008.webp"
          alt="Billede fra år 2008 - Begyndelsen af Stop Spild Af Mad"
          width="600"
          height="400"
          loading="lazy"
        />
        <div class="flex flex-col gap-5">
          <Heading font="sans">Begyndelsen</Heading>
          <Text>
            Stop Spild Af Mad blev stiftet af Selina Juul i 2008 som en facebook
            gruppe, men voksede hurtigt til en anderkendt frivilligt og
            selvstændigt non-profit. Selina Juul var motiveret af hendes fortid
            i Moskva, hvor hun oplevede stor fødevaremangel. Da hun kom til
            Danmark tog hun derfor kampen op i mod madspild.
          </Text>
        </div>
      </div>

      <div class="flex flex-col li2_content inactiveBox gap-5" id="li2_content">
        <!-- Changed: Added alt-text for historical images - better SEO and accessibility -->
        <img
          src="/img/2010.webp"
          alt="Billede fra år 2010 - Stop Spild Af Mad underskriver europæisk erklæring"
        />
        <div class="flex flex-col gap-10">
          <Heading font="sans">Med fra start</Heading>
          <Text>
            I 2010 skrev Stop Spild Af Mad i Europa-Parlamentet sammen med flere
            europæiske organisationer under på Joint Declaration Against Food
            Waste, en europæisk erklæring med formål at reducere madspild med
            minimum 50% inden 2025. Erklæringen var med til at påvirke EU og FN.
          </Text>
        </div>
      </div>

      <div class="flex flex-col li3_content inactiveBox gap-5" id="li3_content">
        <!-- Changed: Added alt-text for historical images - better SEO and accessibility -->
        <img
          src="/img/2011.webp"
          alt="Billede fra år 2011 - Overskudsmad videreformidlet til udsatte"
        />
        <div class="flex flex-col gap-10">
          <Heading font="sans">Overskudsmad til udsatte</Heading>
          <Text>
            Siden 2011 har Stop Spild Af Mad, samarbejdspartnere og frivillige
            indsamlet og videreformidlet over 300 tons god gratis overskudsmad
            til herberger, væresteder, asylcentre, krisecentre, kvindehjem samt
            andre hjælpeorganisationer for hjemløse og socialt udsatte.
          </Text>
        </div>
      </div>

      <div class="flex flex-col li4_content inactiveBox" id="li4_content">
        <!-- Changed: Added alt-text for historical images - better SEO and accessibility -->
        <img
          src="/img/2013.webp"
          alt="Billede fra år 2013 - Doggy bags initiativet lanceres"
        />

        <div class="flex flex-col gap-10">
          <Heading font="sans">Doggy bags</Heading>
          <Text>
            Siden 2013 har Stop Spild Af Mad og Unilever Food Solutions uddelt
            over 60.000 gratis doggybags til over 200 restauranter og
            spisesteder i hele landet. Analyse af TNS Gallup for Stop Spild Af
            Mad viser, at over halvdelen af danskere vil tage imod en doggybag.
          </Text>
        </div>
      </div>

      <div class="flex flex-col li5_content inactiveBox gap-5" id="li5_content">
        <!-- Changed: Added alt-text for historical images - better SEO and accessibility -->
        <img
          src="/img/2014.webp"
          alt="Billede fra år 2014 - Roskilde Festival madspild indsats"
        />
        <div class="flex flex-col gap-10">
          <Heading font="sans">Roskilde Festival</Heading>
          <Text>
            I 2014 har Stop Spild Af Mad, samarbejdspartnere og frivillige
            indsamlet og videreformidlet 27,5 tons god gratis overskudsmad fra
            Roskilde Festival til socialt udsatte. Indsatsen vandt den
            anerkendte internationale festivalpris Green Operations Award.
          </Text>
        </div>
      </div>

      <div class="flex flex-col li6_content inactiveBox gap-5" id="li6_content">
        <!-- SEO & PERFORMANCE: Alt-text and lazy loading -->
        <img
          src="/img/2016.webp"
          alt="Billede fra år 2016 - Stop Spild Af Mad bliver forening"
          width="600"
          height="400"
          loading="lazy"
        />
        <div class="flex flex-col gap-10">
          <Heading font="sans">Officielt en forening</Heading>
          <Text>
            Den 16. november 2016 blev Stop Spild Af Mad formelt omdannet til en
            forening.
            <br />
            <br />
            Hendes Kongelige Højhed Prinsesse Marie har siden 2016 været samarbejdspartner
            til foreningen Stop Spild Af Mad.
          </Text>
        </div>
      </div>

      <div class="flex flex-col li7_content inactiveBox gap-5" id="li7_content">
        <!-- SEO & PERFORMANCE: Alt-text and lazy loading -->
        <img
          src="/img/2019.webp"
          alt="Billede fra år 2019 - Selina Juul holder TEDx Talk"
          width="600"
          height="400"
          loading="lazy"
        />
        <div class="flex flex-col gap-10">
          <Heading font="sans">Tedx Talks</Heading>
          <Text>
            Stifter Selina Juul fik i 2019 igen mulighed for at holde en Tedx
            Talk. Dette skabte både mulighed for at komme længere ud i verden
            med vores mission og værdier, og var med til at sætte Danmark på
            verdens kortet i kampen mod madspild.
            <br />
            <br />
            Hendes Kongelige Højhed Prinsesse Marie har siden 2016 været samarbejdspartner
            til foreningen Stop Spild Af Mad.
          </Text>
        </div>
      </div>

      <div class="flex flex-col li8_content inactiveBox gap-5" id="li8_content">
        <!-- SEO & PERFORMANCE: Alt-text and lazy loading -->
        <img
          src="/img/2024.webp"
          alt="Billede fra år 2024 - Prinsesse Marie bliver protektor"
          width="600"
          height="400"
          loading="lazy"
        />
        <div class="flex flex-col gap-10">
          <Heading font="sans">Kongelig Protektion</Heading>
          <Text>
            Stop Spild Af Mad har Hendes Kongelige Højhed Prinsesse Marie som
            protektor. Hendes Kongelige Højhed Prinsesse Marie blev protektor
            for foreningen Stop Spild Af Mad den 30. maj 2024.
          </Text>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="container mb-section_buttom mt-section_top">
  <Heading htmlheading="h2" size="medium" font="sans" stylingclasses="mb-6">
    Vores TEDx Talks
  </Heading>

  <div class="w-full aspect-video bg-black rounded-lg overflow-hidden mb-6">
    <div class="active" id="vid2012">
      <video width="100%" height="100%" controls class="w-full h-full">
        <source src="img/vids/TedX_2012.mp4" type="video/mp4" />
      </video>
    </div>

    <div class="inactive" id="vid2016">
      <video width="100%" height="100%" controls class="w-full h-full">
        <source src="img/vids/TedX_2016.mp4" type="video/mp4" />
      </video>
    </div>
  </div>

  <div class="grid grid-cols-2 gap-5 max-w-md">
    <button
      id="2012_btn"
      class="hover:cursor-pointer bg-(--color-orange--100) hover:bg-(--color-orange--400) text-(--color-orange--400) hover:text-(--color-orange--100) transition-all duration-300 font-semibold uppercase py-4 rounded-CTA flex items-center justify-center"
    >
      2012
    </button>

    <button
      id="2016_btn"
      class="hover:cursor-pointer bg-(--color-orange--400) hover:bg-(--color-orange--100) text-(--color-orange--100) hover:text-(--color-orange--400) transition-all duration-300 font-semibold uppercase py-4 rounded-CTA flex items-center justify-center"
    >
      2016
    </button>
  </div>
</section>

<Articles />

<div class="my-60">
  <a
    href="#"
    id="scrollToTop"
    class="material-icons-outlined hover:cursor-pointer"
  >
    <Button variant="black">TILBAGE TIL TOPPEN</Button>
  </a>
</div>

<style>
  .shuffleImg {
    animation: animate 5s ease-in-out infinite;
  }

  .shuffleImg:nth-child(1) {
    animation-name: animate1;
    z-index: 2;
  }
  .shuffleImg:nth-child(2) {
    animation-name: animate2;
    z-index: 1;
  }

  @keyframes animate1 {
    0% {
      opacity: 1;
    }
    32% {
      opacity: 1;
    }
    50% {
      opacity: 0;
    }
    98% {
      opacity: 0;
    }
    99% {
      opacity: 1;
    }
    100% {
      opacity: 1;
    }
  }
  @keyframes animate2 {
    0% {
      opacity: 0;
    }
    32% {
      opacity: 0;
    }
    50% {
      opacity: 1;
    }
    98% {
      opacity: 1;
    }
    99% {
      opacity: 0;
    }
    100% {
      opacity: 0;
    }
  }
  .activeTime {
    color: purple;
    cursor: default;
  }

  .inactiveBox {
    display: none;
  }

  h1 {
    font-size: 4rem;
  }

  ul::-webkit-scrollbar {
    display: none;
  }

  ul {
    -ms-overflow-style: none;
    scrollbar-width: none;
    scroll-behavior: smooth;
  }

  li {
    cursor: pointer;

    h1 {
      font-size: 5rem;
    }
  }

  .active {
    display: block;
  }

  .inactive {
    display: none;
  }

  .carousel {
    display: flex;
    overflow-x: auto;
  }

  .carousel::-webkit-scrollbar {
    display: none;
  }

  .group {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1em;
    animation: spin 40s linear infinite;
    padding-right: 1em;
  }

  .carousel_img {
    flex: 0 0 5em;
    align-content: center;
    padding: 1em;
  }

  @keyframes spin {
    from {
      transform: translateX(0);
    }
    to {
      transform: translateX(-50%);
    }
  }

  #scrollToTop {
    animation-timeline: scroll(y);
    scroll-behavior: smooth;

    display: flex;
    align-items: center;
    justify-content: center;
  }

  .map-container {
    position: relative;
    width: 100%;
    height: 100%;
    overflow: hidden;
    cursor: grab;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .map-container.dragging {
    cursor: grabbing;
  }

  .map-image {
    width: 100%;
    height: 100%;
    object-fit: contain;
    user-select: none;
    transform: scale(3);
    transform-origin: center;
    flex-shrink: 0;
  }
</style>

<script is:inline>
  // function ScrollToTips() {
  //   document.getElementById("tips").scrollIntoView({ behavior: "smooth" });
  // }

  function ScrollToTips() {
    document.getElementById("tips").scrollIntoView({ behavior: "smooth" });
  }

  function ScrollToHistorie() {
    document.getElementById("historie").scrollIntoView({ behavior: "smooth" });
  }

  function ScrollToTip1() {
    document.getElementById("tip1").scrollIntoView({ behavior: "smooth" });
  }

  function ScrollToTip2() {
    document.getElementById("tip2").scrollIntoView({ behavior: "smooth" });
  }

  function ScrollToTip3() {
    document.getElementById("tip3").scrollIntoView({ behavior: "smooth" });
  }

  document.addEventListener("DOMContentLoaded", function () {
    // TEDx Talk JS
    const btn2012 = document.getElementById("2012_btn");
    const btn2016 = document.getElementById("2016_btn");
    const vid2012 = document.getElementById("vid2012");
    const vid2016 = document.getElementById("vid2016");

    btn2016.addEventListener("click", () => {
      vid2016.classList.remove("inactive");
      vid2016.classList.add("active");
      vid2012.classList.remove("active");
      vid2012.classList.add("inactive");

      btn2016.classList.remove("bg-(--color-orange--400)");
      btn2016.classList.add("bg-(--color-orange--100)");
      btn2016.classList.remove("text-(--color-orange--100))");
      btn2016.classList.add("text-(--color-orange--400)");

      btn2012.classList.add("bg-(--color-orange--400)");
      btn2012.classList.remove("bg-(--color-orange--100)");
      btn2012.classList.add("text-(--color-orange--100))");
      btn2012.classList.remove("text-(--color-orange--400)");
    });

    btn2012.addEventListener("click", () => {
      vid2012.classList.remove("inactive");
      vid2012.classList.add("active");
      vid2016.classList.remove("active");
      vid2016.classList.add("inactive");

      btn2012.classList.remove("bg-(--color-orange--400)");
      btn2012.classList.add("bg-(--color-orange--100)");
      btn2012.classList.remove("text-(--color-orange--100))");
      btn2012.classList.add("text-(--color-orange--400)");

      btn2016.classList.add("bg-(--color-orange--400)");
      btn2016.classList.remove("bg-(--color-orange--100)");
      btn2016.classList.add("text-(--color-orange--100))");
      btn2016.classList.remove("text-(--color-orange--400)");
    });

    // Scroll to top
    const scrollToTopBtn = document.getElementById("scrollToTop");
    if (scrollToTopBtn) {
      scrollToTopBtn.addEventListener("click", function (e) {
        e.preventDefault();
        window.scrollTo({
          top: 0,
          behavior: "smooth",
        });
      });
    }

    // Scroll down :3
    const scrollDown = document.getElementById("scrollDown");
    if (scrollDown) {
      scrollDown.addEventListener("click", function (e) {
        e.preventDefault();
        window.scrollTo({
          top: 750,
          behavior: "smooth",
        });
      });
    }

    // Stagger animation for cart images - Simple vanilla JS version
    function initStaggerAnimation() {
      const staggerContainer = document.getElementById("stagger");
      if (!staggerContainer) {
        console.warn("Stagger container not found");
        return;
      }

      const images = staggerContainer.querySelectorAll("img");
      if (images.length === 0) {
        console.warn("No images found in stagger container");
        return;
      }

      // Set initial opacity to 0
      images.forEach((img) => {
        img.style.opacity = "0";
        img.style.transition = "opacity 0.6s ease-in-out";
      });

      // Use Intersection Observer to trigger animation when element is in view
      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              // Animate images with stagger effect
              images.forEach((img, index) => {
                setTimeout(() => {
                  img.style.opacity = "1";
                }, index * 150); // 150ms delay between each image
              });
              observer.unobserve(staggerContainer);
            }
          });
        },
        { threshold: 0.1 },
      );

      observer.observe(staggerContainer);
    }

    // Initialize stagger animation
    initStaggerAnimation();

    // ===== DRAGGABLE MAP =====
    const mapContainer = document.getElementById("mapContainer");
    const mapImage = document.getElementById("mapImage");

    if (mapContainer && mapImage) {
      let isDragging = false;
      let startX = 0;
      let startY = 0;
      let offsetX = 0;
      let offsetY = 0;
      const scale = 3;

      // Calculate maximum allowed offset
      const updateBounds = () => {
        const containerRect = mapContainer.getBoundingClientRect();
        const imageWidth = mapImage.offsetWidth * scale;
        const imageHeight = mapImage.offsetHeight * scale;

        window.maxOffsetX = (imageWidth - containerRect.width) / 2 / scale;
        window.maxOffsetY = (imageHeight - containerRect.height) / 2 / scale;
      };

      mapImage.addEventListener("load", updateBounds);
      setTimeout(updateBounds, 100);
      window.addEventListener("resize", updateBounds);

      mapContainer.addEventListener("mousedown", (e) => {
        isDragging = true;
        startX = e.clientX;
        startY = e.clientY;
        mapContainer.classList.add("dragging");
      });

      document.addEventListener("mousemove", (e) => {
        if (!isDragging) return;

        const deltaX = e.clientX - startX;
        const deltaY = e.clientY - startY;

        offsetX += deltaX;
        offsetY += deltaY;

        // Clamp offsets to prevent dragging out of bounds
        offsetX = Math.max(
          -window.maxOffsetX,
          Math.min(window.maxOffsetX, offsetX),
        );
        offsetY = Math.max(
          -window.maxOffsetY,
          Math.min(window.maxOffsetY, offsetY),
        );

        mapImage.style.transform = `scale(${scale}) translate(${offsetX}px, ${offsetY}px)`;

        startX = e.clientX;
        startY = e.clientY;
      });

      document.addEventListener("mouseup", () => {
        isDragging = false;
        mapContainer.classList.remove("dragging");
      });

      // Prevent text selection while dragging
      mapContainer.addEventListener("selectstart", (e) => {
        if (isDragging) e.preventDefault();
      });
    }

    // ===== TIDSLINJE (TIMELINE) JAVASCRIPT =====
    // This section handles the interactive timeline where users can click on years (2008-2015)
    // to switch between different content boxes showing historical events

    // Create arrays for years and their corresponding content boxes
    const timelineItems = [];
    for (let i = 1; i <= 8; i++) {
      const listElement = document.getElementById(`li${i}`);
      const contentElement = document.getElementById(`li${i}_content`);
      if (listElement && contentElement) {
        timelineItems.push({ list: listElement, box: contentElement });
      }
    }

    // Generic function to handle timeline year clicks
    function activateTimelineYear(activeIndex) {
      timelineItems.forEach((item, index) => {
        if (index === activeIndex) {
          // Activate this year
          item.list.classList.add("activeTime");
          item.box.classList.remove("inactiveBox");
        } else {
          // Deactivate all other years
          item.list.classList.remove("activeTime");
          item.box.classList.add("inactiveBox");
        }
      });
    }

    // Add click listeners to all timeline items
    timelineItems.forEach((item, index) => {
      item.list.addEventListener("click", () => {
        activateTimelineYear(index);
      });
    });
  });
</script>
